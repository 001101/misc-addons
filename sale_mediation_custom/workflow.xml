<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
		<!-- LEAD based -->

        <record id="wkf_sales_funnel_lead" model="workflow">
            <field name="name">sales_funnel_lead</field>
            <field name="osv">crm.lead</field>
            <field name="on_create">True</field>
        </record>

        <!-- Activity -->
        <record id="act_lead_lead" model="workflow.activity">
            <field name="wkf_id" ref="wkf_sales_funnel_lead"/>
            <field name="flow_start">True</field>
            <field name="name">lead</field>
        </record>
        
        <record id="act_lead_quotation" model="workflow.activity">
            <field name="wkf_id" ref="wkf_sales_funnel_lead"/>
            <field name="name">quotation</field>
            <field name="kind">function</field>
            <field name="action">action_set_state_quotation()</field>
        </record>

        <record id="act_lead_negotiation" model="workflow.activity">
            <field name="wkf_id" ref="wkf_sales_funnel_lead"/>
            <field name="name">negotiation</field>
            <field name="kind">function</field>
            <field name="action">action_set_state_negotiation()</field>
        </record>

        <record id="act_lead_sale_won" model="workflow.activity">
            <field name="wkf_id" ref="wkf_sales_funnel_lead"/>
            <field name="name">sale_won</field>
            <field name="kind">function</field>
            <field name="action">action_set_state_sale_won()</field>
        </record>

        <record id="act_lead_sale_lost" model="workflow.activity">
            <field name="wkf_id" ref="wkf_sales_funnel_lead"/>
            <field name="name">sale_lost</field>
            <field name="kind">function</field>
            <field name="action">action_set_state_sale_lost()</field>
        </record>
        <!-- Transistion -->

        <record id="trans_lead_lead_quotation" model="workflow.transition">
            <field name="act_from" ref="act_lead_lead"/>
            <field name="act_to" ref="act_lead_quotation"/>
            <field name="signal">proposal_created</field>
        </record>
        <record id="trans_lead_quotation_negotiation" model="workflow.transition">
            <field name="act_from" ref="act_lead_quotation"/>
            <field name="act_to" ref="act_lead_negotiation"/>
            <field name="signal">proposal_sent</field>
        </record>
        <record id="trans_lead_negotiation_sale_won" model="workflow.transition">
            <field name="act_from" ref="act_lead_negotiation"/>
            <field name="act_to" ref="act_lead_sale_won"/>
            <field name="signal">proposal_confirmed</field>
        </record>





		<!-- SALES FUNNEL (contract) based -->
        <record id="wkf_sales_funnel" model="workflow">
            <field name="name">sales_funnel</field>
            <field name="osv">account.analytic.account</field>
            <field name="on_create">True</field>
        </record>

        <!-- Activity -->
        <record id="act_lead" model="workflow.activity">
            <field name="wkf_id" ref="wkf_sales_funnel"/>
            <field name="flow_start">True</field>
            <field name="name">lead</field>
        </record>
        
        <record id="act_new" model="workflow.activity">
            <field name="wkf_id" ref="wkf_sales_funnel"/>
            <field name="name">new</field>
            <field name="kind">function</field>
            <field name="action">action_set_state_new()</field>
        </record>

        <record id="act_qualified" model="workflow.activity">
            <field name="wkf_id" ref="wkf_sales_funnel"/>
            <field name="name">qualified</field>
            <field name="kind">function</field>
            <field name="action">action_set_state_qualified()</field>
        </record>
     
        <record id="act_quotation" model="workflow.activity">
            <field name="wkf_id" ref="wkf_sales_funnel"/>
            <field name="name">quotation</field>
            <field name="kind">function</field>
            <field name="action">action_set_state_quotation()</field>
        </record>

        <record id="act_negotiation" model="workflow.activity">
            <field name="wkf_id" ref="wkf_sales_funnel"/>
            <field name="name">negotiation</field>
            <field name="kind">function</field>
            <field name="action">action_set_state_negotiation()</field>
        </record>

        <record id="act_sale_won" model="workflow.activity">
            <field name="wkf_id" ref="wkf_sales_funnel"/>
            <field name="name">sale_won</field>
            <field name="kind">function</field>
            <field name="action">action_set_state_sale_won()</field>
        </record>
        <!-- Transistion -->

        <record id="trans_lead_new" model="workflow.transition">
            <field name="act_from" ref="act_lead"/>
            <field name="act_to" ref="act_new"/>
            <field name="signal">new</field>
        </record>

        <record id="trans_lead_qualified" model="workflow.transition">
            <field name="act_from" ref="act_lead"/>
            <field name="act_to" ref="act_qualified"/>
            <field name="signal">qualified</field>
        </record>
        <record id="trans_new_qualified" model="workflow.transition">
            <field name="act_from" ref="act_new"/>
            <field name="act_to" ref="act_qualified"/>
            <field name="signal">qualified</field>
        </record>
        <record id="trans_lead_quotation" model="workflow.transition">
            <field name="act_from" ref="act_lead"/>
            <field name="act_to" ref="act_quotation"/>
            <field name="signal">proposal_created</field>
        </record>
        <record id="trans_new_quotation" model="workflow.transition">
            <field name="act_from" ref="act_new"/>
            <field name="act_to" ref="act_quotation"/>
            <field name="signal">proposal_created</field>
        </record>
        <record id="trans_qualified_quotation" model="workflow.transition">
            <field name="act_from" ref="act_qualified"/>
            <field name="act_to" ref="act_quotation"/>
            <field name="signal">proposal_created</field>
        </record>

        <record id="trans_quotation_negotiation" model="workflow.transition">
            <field name="act_from" ref="act_quotation"/>
            <field name="act_to" ref="act_negotiation"/>
            <field name="signal">proposal_sent</field>
        </record>
        <record id="trans_negotiation_sale_won" model="workflow.transition">
            <field name="act_from" ref="act_negotiation"/>
            <field name="act_to" ref="act_sale_won"/>
            <field name="signal">proposal_confirmed</field>
        </record>

    </data>
</openerp>
